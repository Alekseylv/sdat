<div class="row">
    <h1>SDAT</h1>
</div>

<div class="row marketing">
    <editable-table nodes="requirements" pre-create="extendRequirement(node)"></editable-table>

    <editable-table nodes="nodes"></editable-table>


    <uib-tabset active="active">
        <uib-tab ng-repeat="req in requirements track by req.id" index="$index" heading="{{req.label}}">

            <table class="table">
                <thead>
                <th></th>
                <th ng-repeat="node in nodes track by node.id">{{node.label}}</th>
                </thead>
                <tbody>
                <tr ng-repeat="node in nodes track by node.id">
                    <td>{{node.label}}</td>
                    <td ng-repeat="node2 in nodes track by node2.id">
                        <input type="checkbox" ng-model="req.edges[node.id][node2.id]"
                               name="{{node.id + '' + node2.id}}" ng-change="ticked(node.id, node2.id, req)">
                    </td>
                </tr>
                </tbody>
            </table>

            <h3>Graph</h3>

            <div class="panel panel-default">
                <div class="panel-body">
                    <vis-network nodes="req.nodeDataSet" edges="req.edgeDataSet" options="networkOptions" id="previewNetwork-{{req.id}}">
                    </vis-network>
                </div>
            </div>

            <h3>Matrix</h3>

            <table class="table">
                <thead>
                <th></th>
                <th ng-repeat="node in req.nodeDataSet._data track by node.id">{{node.label}}</th>
                </thead>
                <tbody>
                <tr ng-repeat="node in req.nodeDataSet._data track by node.id">
                    <td>{{node.label}}</td>
                    <td ng-repeat="node2 in req.nodeDataSet._data track by node2.id">
                        {{req.edges[node.id][node2.id] ? '1' : '0'}}
                    </td>
                </tr>
                </tbody>
            </table>

            <h3>Reachability matrix</h3>

            <table class="table">
                <thead>
                <th></th>
                <th ng-repeat="node in req.nodeDataSet._data track by node.id">{{node.label}}</th>
                </thead>
                <tbody>
                <tr ng-repeat="node in req.nodeDataSet._data track by $index" ng-init="node1Index = $index">
                    <td>{{node.label}}</td>
                    <td ng-repeat="node2 in req.nodeDataSet._data track by $index" ng-init="node2Index = $index">
                        {{req.reachabilityMatrix[node1Index][node2Index]}}
                    </td>
                </tr>
                </tbody>
            </table>

            <h3>Precedent set</h3>

            <div class="panel panel-default">
                <div class="panel-body">
                    <p ng-repeat="node in req.nodeDataSet._data track by $index" ng-init="index = $index">
                        C{{req.id}}({{node.label}}) = {{req.formattedPrecedentSet[index]}}
                    </p>
                </div>
            </div>


            <h3>Reachability set</h3>

            <div class="panel panel-default">
                <div class="panel-body">
                    <p ng-repeat="node in req.nodeDataSet._data track by $index" ng-init="index = $index">
                        F{{req.id}}({{node.label}}) = {{req.formattedReachabilitySet[index]}}
                    </p>
                </div>
            </div>

            <h3>Information elements</h3>
            <div class="panel panel-default">
                <div class="panel-body">
                    <p>D{{req.id}}f={{req.formattedInformationalElements}}</p>
                </div>
            </div>
            <h3>Information group</h3>
            <div class="panel panel-default">
                <div class="panel-body">
                    <p>D{{req.id}}g={{req.formattedInformationalGroups}}</p>
                </div>
            </div>


            <h3>Hierarchy level</h3>

            <div class="panel panel-default">
                <div class="panel-body">
                    <p ng-repeat="node in req.informationalGroups track by $index" ng-init="index = $index">
                        Node ({{node.label}}) is a P{{req.groupLevels[index].level}} hierarchy level group
                    </p>
                </div>
            </div>


            <h3>Informational structure</h3>

            <div class="panel panel-default">
                <div class="panel-body">
                    <p ng-repeat="node in req.informationalGroups track by $index" ng-init="index = $index">
                        H({{node.label}}) = {{_.map(req.informationalStructure[index], _.property('label'))}}
                    </p>
                </div>
            </div>

            <h3>Daduplicated Graph</h3>

            <div class="panel panel-default">
                <div class="panel-body">
                    <vis-network nodes="req.nodeDataSet" edges="req.deduplicatedEdgeDataSet" options="networkOptions"
                                 id="deduplicatedNetwork-{{req.id}}">
                    </vis-network>
                </div>
            </div>

            <h3>Daduplicated Matrix</h3>

            <table class="table">
                <thead>
                <th></th>
                <th ng-repeat="node in req.nodeDataSet._data track by node.id">{{node.label}}</th>
                </thead>
                <tbody>
                <tr ng-repeat="node in req.nodeDataSet._data track by node.id">
                    <td>{{node.label}}</td>
                    <td ng-repeat="node2 in req.nodeDataSet._data track by node2.id">
                        {{req.deduplicatedMatrix[node.id][node2.id]}}
                    </td>
                </tr>
                </tbody>
            </table>

        </uib-tab>
    </uib-tabset>


</div>
